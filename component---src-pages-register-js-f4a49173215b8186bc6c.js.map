{"version":3,"sources":["webpack:///./src/components/config/Firebase.js","webpack:///./src/pages/register.js"],"names":["firebase","initializeApp","databaseURL","Register","props","_this","_Component","call","this","state","name","institution","stream","course","year","phone","email","teamSize","teammembers","event","maxTeamSize","maxTeam","handleSubmit","bind","assertThisInitialized_default","handleChange","componentDidMount","location","setState","slug","console","log","register","database","ref","displaySuccess","message","successContainer","document","querySelector","innerHTML","style","height","display","setTimeout","displayError","errorContainer","verify","fields","isNaN","test","length","parseInt","_callee","data","regenerator_default","a","wrap","_context","prev","next","preventDefault","Object","assign","push","set","teamMembers","stop","target","value","render","undefined","react_default","createElement","layout","seo","title","className","onSubmit","type","placeholder","onChange","Component"],"mappings":"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","file":"component---src-pages-register-js-f4a49173215b8186bc6c.js","sourcesContent":["import firebase from \"firebase/app\";\n\nlet config = {\n  databaseURL: \"https://reflexons-2019.firebaseio.com\",\n};\n\nfirebase.initializeApp(config);\n\nexport default firebase;","import React, { Component } from \"react\";\nimport firebase from \"../components/config/Firebase\";\nimport \"firebase/database\";\n\nimport Layout from \"../components/layout\";\nimport SEO from \"../components/seo\";\n\nimport \"./register.scss\";\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: \"\",\n      institution: \"\",\n      stream: \"\",\n      course: \"\",\n      year: \"\",\n      phone: \"\",\n      email: \"\",\n      teamSize: \"\",\n      teammembers: \"\",\n      event: \"\"\n    };\n\n    this.maxTeamSize = this.props.maxTeam;\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.location.state !== null)\n      this.setState({ event: this.props.location.state.slug });\n\n    if (this.props.location.state !== null) {\n      this.maxTeamSize = this.props.location.state.maxTeam;\n      console.log(\"team size: \" + this.props.location.state.maxTeam);\n    }\n\n    this.register = firebase.database().ref(\"registrations\");\n  }\n\n  displaySuccess(message) {\n    const successContainer = document.querySelector(\".success-msg\");\n    successContainer.innerHTML = message;\n    successContainer.style.height = \"auto\";\n    successContainer.style.display = \"block\";\n    setTimeout(() => {\n      successContainer.style.height = \"0\";\n      successContainer.style.display = \"none\";\n    }, 3000);\n  }\n\n  displayError(message) {\n    const errorContainer = document.querySelector(\".error-msg\");\n    errorContainer.innerHTML = message;\n    errorContainer.style.height = \"auto\";\n    errorContainer.style.display = \"block\";\n    setTimeout(() => {\n      errorContainer.style.height = \"0\";\n      errorContainer.style.display = \"none\";\n    }, 3000);\n  }\n\n  verify(fields) {\n    // name:\n    if (fields.name === \"\") {\n      this.displayError(\"Enter your name\");\n      return false;\n    }\n\n    // institution:\n    if (fields.institution === \"\") {\n      this.displayError(\"Enter your institution's name\");\n      return false;\n    }\n\n    // stream:\n    if (fields.stream === \"\") {\n      this.displayError(\"Enter your field's name\");\n      return false;\n    }\n\n    // course:\n    if (fields.course === \"\") {\n      this.displayError(\"Enter your course name\");\n      return false;\n    }\n\n    // year of study:\n    if (fields.year === \"\") {\n      this.displayError(\"Enter the year of studies at your institution\");\n      return false;\n    } else if (isNaN(fields.year)) {\n      this.displayError(\"Enter a valid year of study (between 1 and 5)\");\n      return false;\n    } else if (!/[1-5]/.test(fields.year)) {\n      this.displayError(\"Years of studying should be between 1 and 5\");\n      return false;\n    }\n\n    // phone number:\n    if (fields.phone === \"\") {\n      this.displayError(\"Enter a phone number (for contacting you)\");\n      return false;\n    } else if (fields.phone.length !== 10) {\n      this.displayError(\"Enter a 10 digit phone number\");\n      return false;\n    } else if (!/^\\d+$/.test(fields.phone)) {\n      this.displayError(\"Enter a valid phone number\");\n      return false;\n    }\n\n    // email id:\n    if (fields.email === \"\") {\n      this.displayError(\"Enter an email address (for contacting you)\");\n      return false;\n    } else if (!/^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/.test(fields.email)) {\n      this.displayError(\"Enter a valid email address\");\n      return false;\n    }\n\n    // team size:\n    if (fields.teamSize === \"\") {\n      this.displayError(\"Enter your team's size\");\n      return false;\n    } else if (isNaN(fields.teamSize)) {\n      this.displayError(\n        \"Enter your team's size in digits (between 1 and \" +\n          this.maxTeamSize +\n          \")\"\n      );\n      return false;\n    } else if (\n      parseInt(fields.teamSize) < 1 ||\n      parseInt(fields.teamSize) > this.maxTeamSize\n    ) {\n      this.displayError(\n        \"Your team's size should be between 1 and \" + this.maxTeamSize\n      );      \n      return false;\n    }\n\n    if(this.maxTeamSize !== 1 && fields.teammembers === \"\") {\n      this.displayError(\"Enter your team member(s)'(s) names\");\n      return false;\n    }\n\n    // valid:\n    return true;\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    const data = { ...this.state };\n\n    if (this.verify(data)) {\n      const newReg = firebase\n        .database()\n        .ref(\"registrations\")\n        .push();\n      newReg.set({\n        name: data.name,\n        institution: data.institution,\n        stream: data.stream,\n        course: data.course,\n        year: data.year,\n        phone: data.phone,\n        email: data.email,\n        event: data.event,\n        teamSize: data.teamSize,\n        teamMembers: data.teammembers\n      });\n\n      this.setState({\n        name: \"\",\n        institution: \"\",\n        stream: \"\",\n        course: \"\",\n        year: \"\",\n        phone: \"\",\n        email: \"\",\n        teamSize: \"\",\n        teammembers: \"\",\n      })\n\n      this.displaySuccess(\n        \"Thank you for registering! We will get back to you soon.\"\n      );\n    }\n  }\n\n  handleChange(event) {\n    let key = event.target.name;\n    switch (key) {\n      case \"name\":\n        this.setState({ name: event.target.value });\n        break;\n      case \"institution\":\n        this.setState({ institution: event.target.value });\n        break;\n      case \"stream\":\n        this.setState({ stream: event.target.value });\n        break;\n      case \"course\":\n        this.setState({ course: event.target.value });\n        break;\n      case \"year\":\n        this.setState({ year: event.target.value });\n        break;\n      case \"phone\":\n        this.setState({ phone: event.target.value });\n        break;\n      case \"email\":\n        this.setState({ email: event.target.value });\n        break;\n      case \"teamsize\":\n        this.setState({ teamSize: event.target.value });\n        break;\n      case \"teammember\":\n        this.setState({ teammembers: event.target.value });\n        break;\n      default:\n        console.log(\"Error: \" + event);\n    }\n  }\n\n  render() {\n    const data = this.props.location.state;\n    if (\n      data === null ||\n      data === undefined ||\n      data.event === null ||\n      data.event === undefined ||\n      data.event === \"\"\n    )\n      return (\n        <Layout>\n          <SEO title=\"Event Registration\" />\n          <div className=\"event-not-found\">\n            First, select an event from the homepage\n            <span>Tip: open the menu and tap on 'Events'</span>\n          </div>\n        </Layout>\n      );\n    else {\n      return (\n        <Layout>\n          <SEO title={data.event + \" Registration\"} />\n          <div className=\"register-form\">\n            <form onSubmit={this.handleSubmit}>\n              <div className=\"page-heading\">\n                {data.event || \"\"} Registration\n              </div>\n              <input\n                className=\"input-field\"\n                type=\"text\"\n                name=\"name\"\n                placeholder=\"Enter Name\"\n                onChange={this.handleChange}\n                value={this.state.name}\n              />\n              <span className=\"focus-border\" />\n              <input\n                className=\"input-field\"\n                type=\"text\"\n                name=\"institution\"\n                placeholder=\"Name Of Institution\"\n                onChange={this.handleChange}\n                value={this.state.institution}\n              />\n              <input\n                className=\"input-field\"\n                type=\"text\"\n                name=\"stream\"\n                placeholder=\"Enter Your Stream\"\n                onChange={this.handleChange}\n                value={this.state.stream}\n              />\n              <input\n                className=\"input-field\"\n                type=\"text\"\n                name=\"course\"\n                placeholder=\"Enter Your Course\"\n                onChange={this.handleChange}\n                value={this.state.course}\n              />\n              <input\n                className=\"input-field\"\n                type=\"text\"\n                name=\"year\"\n                placeholder=\"Enter your year of studies (at your institute)\"\n                onChange={this.handleChange}\n                value={this.state.year}\n              />\n              <input\n                className=\"input-field\"\n                type=\"tel\"\n                name=\"phone\"\n                placeholder=\"Enter Your Phone Number\"\n                onChange={this.handleChange}\n                value={this.state.phone}\n              />\n              <input\n                className=\"input-field\"\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"Enter Your Email ID\"\n                onChange={this.handleChange}\n                value={this.state.email}\n              />\n              <input\n                className=\"input-field\"\n                name=\"teamsize\"\n                placeholder=\"# of Team Members\"\n                onChange={this.handleChange}\n                value={this.state.teamSize}\n              />\n              <input\n                className=\"input-field\"\n                name=\"teammember\"\n                placeholder=\"Enter Name Of Team Members\"\n                onChange={this.handleChange}\n                value={this.state.teammembers}\n              />\n              <div\n                className=\"error-msg\"\n                style={{ height: 0, display: \"none\" }}\n              />\n              <div\n                className=\"success-msg\"\n                style={{ height: 0, display: \"none\" }}\n              />\n              <input\n                className=\"input-field submit-button btn btn-lg btn-outline-success\"\n                type=\"submit\"\n              />\n            </form>\n          </div>\n        </Layout>\n      );\n    }\n  }\n}\n\nexport default Register;\n"],"sourceRoot":""}